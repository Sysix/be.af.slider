!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.beAfSlider=b()}(this,function(){"use strict";var a=function(){},b=function(a){a=a||{};for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)d.hasOwnProperty(e)&&("object"==typeof d[e]?a[e]=b(a[e],d[e]):a[e]=d[e])}return a},c=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},d=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},e=function(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}},f=function(a){var b=document.createElement("div");return b.innerHTML=a,b.children[0]},g=function(a,c){return this.element=a,this.images={},this.options=b({},g.defaultOptions,c),this.init()};g.defaultOptions={direction:"horizontal",before:null,after:null,initListeners:!0,percent:50,minPercent:0,maxPercent:100,callbacks:{afterBuild:a,beforePercent:a,beforeResize:a,afterResize:a},template:{slider:'<div class="be-af-slider-slider"></div>',before:'<div class="be-af-slider-before"></div>',after:'<div class="be-af-slider-after"></div>'}};var h={VERSION:"2.0.0",create:function(a,b){return new g(a,b)},preLoad:function(a,b){var c=a.options.before,d=a.options.after,e=0;[c,d].forEach(function(c,d){var f=new Image;f.src=c,f.onload=function(){var f=document.createElement("img");f.src=c,e++,a.images[d]=f,2===e&&b.call(a)}})},getDragPointerX:function(a){return a.pageX?a.pageX:a.touches[0].pageX},getDragPointerY:function(a){return a.pageY?a.pageY:a.touches[0].pageY},onWindowResize:function(){this.options.callbacks.beforeResize.call(this.element),d(this.after,"be-af-slider-max-width"),window.innerWidth>this.after.innerWidth?(d(this.before,"be-af-slider-max-width"),d(this.hidden,"be-af-slider-max-width")):(c(this.before,"be-af-slider-max-width"),c(this.after,"be-af-slider-max-width"),c(this.hidden,"be-af-slider-max-width")),this.options.callbacks.afterResize.call(this.element)},onMoveStart:function(){this.options.isMoving=!0,c(this.element,"active"),this.addDocumentListeners()},onMoving:function(a){if(a.preventDefault(),a.stopPropagation(),!this.options.isMoving)return this;var b,f,g,i=this.hidden.style.visibility;this.hidden.style.visibility="hidden",d(this.hidden,"be-af-slider-hidden"),"horizontal"===this.options.direction?(b=e(this.element).left,f=this.hidden.clientWidth,g=h.getDragPointerX(a)-b):(b=e(this.element).top,f=this.hidden.clientHeight,g=h.getDragPointerY(a)-b),this.hidden.style.visibility=i,c(this.hidden,"be-af-slider-hidden"),this.setPercent(100*g/f)},onMoveEnd:function(a){a.preventDefault(),a.stopPropagation(),this.options.isMoving=!1,d(this.element,"active"),this.removeDocumentListeners()},setDataOptions:function(a){["direction","percent","before","after","minPercent","maxPercent"].forEach(function(b){b in a.element.dataset&&(a.options[b]=a.element.dataset[b])})}};return g.prototype={init:function(){return this.options.isMoving=!1,h.setDataOptions(this),h.preLoad(this,this.build),this},build:function(){return c(this.element,this.options.direction),this.slider=f(this.options.template.slider),this.before=f(this.options.template.before),this.after=f(this.options.template.after),this.hidden=this.images[0].cloneNode(!0),this.element.appendChild(this.slider),this.before.appendChild(this.images[0]),this.element.appendChild(this.before),this.after.appendChild(this.images[1]),this.element.appendChild(this.after),c(this.hidden,"be-af-slider-hidden"),this.element.appendChild(this.hidden),this.options.initListeners&&this.initListeners(),this.setPercent(this.options.percent),this.options.callbacks.afterBuild.call(this),this},initListeners:function(){return h.onWindowResize.call(this),window.addEventListener("resize",h.onWindowResize.bind(this)),this.slider.addEventListener("mousedown",h.onMoveStart.bind(this)),this.slider.addEventListener("touchstart",h.onMoveStart.bind(this)),this},addDocumentListeners:function(){document.addEventListener("mousemove",h.onMoving.bind(this)),document.addEventListener("touchmove",h.onMoving.bind(this)),document.addEventListener("mouseup",h.onMoveEnd.bind(this)),document.addEventListener("touchend",h.onMoveEnd.bind(this))},removeDocumentListeners:function(){document.removeEventListener("mousemove",h.onMoving),document.removeEventListener("touchmove",h.onMoving),document.removeEventListener("mouseup",h.onMoveEnd),document.removeEventListener("touchend",h.onMoveEnd)},setPercent:function(a){var b,c;return"horizontal"===this.options.direction?(b="width",c="left"):(b="height",c="top"),a<this.options.minPercent&&(a=this.options.minPercent),a>this.options.maxPercent&&(a=this.options.maxPercent),this.percent=a,this.options.callbacks.beforePercent.call(this),this.before.style[b]=this.percent+"%",this.slider.style[c]=this.percent+"%",this}},h});