!function(a,b,c){"use strict";a.beAfSlider=function(){return this.defaultOptions={direction:"horizontal",before:null,after:null,initListeners:!0,startPercent:50,minPercent:0,maxPercent:100,callbacks:{afterBuild:a.noop,beforePercent:a.noop,beforeResize:a.noop,afterResize:a.noop},template:{slider:'<div class="be-af-slider-slider"></div>',before:'<div class="be-af-slider-before"></div>',after:'<div class="be-af-slider-after"></div>'}},this};var d=function(b,c){return this._el=a(b),this.images={},this.options=a.extend(!0,{},a.beAfSlider().defaultOptions,c),this.init()},e=function(){return{preLoad:function(b,c){var d=b.getOption("before"),e=b.getOption("after"),f=0;a.each([d,e],function(d,e){var g=new Image;g.src=e,g.onload=function(){f++,b.images[d]=a("<img>").attr("src",e),2==f&&c()}})},getDragPointerX:function(a){return a.pageX?a.pageX:a.originalEvent.touches[0].pageX},getDragPointerY:function(a){return a.pageY?a.pageY:a.originalEvent.touches[0].pageY},onWindowResize:function(){this.getOption("callbacks").beforeResize.bind(this)(),c.innerWidth>this._after.removeClass("be-af-slider-max-width").width()?(this._before.removeClass("be-af-slider-max-width"),this._after.removeClass("be-af-slider-max-width"),this._hidden.removeClass("be-af-slider-max-width")):(this._before.addClass("be-af-slider-max-width"),this._after.addClass("be-af-slider-max-width"),this._hidden.addClass("be-af-slider-max-width")),this.getOption("callbacks").afterResize.bind(this)()},onMoveStart:function(){this.setOption("isMoving",!0),this.getElement().addClass("active")},onMoving:function(a){if(!this.getOption("isMoving"))return this;a.preventDefault(),a.stopPropagation();var b,c,d;"horizontal"==this.getOption("direction")?(b=this.getElement().offset().left,c=this._hidden.width(),d=e().getDragPointerX(a)-b):(b=this.getElement().offset().top,c=this._hidden.height(),d=e().getDragPointerY(a)-b),this.setPercent(100*d/c)},onMoveEnd:function(){this.setOption("isMoving",!1),this.getElement().removeClass("active")},setDataOptions:function(){var b=this.getElement(),c={direction:"direction",percent:"startPercent",before:"before",after:"after","min-percent":"minPercent","max-percent":"maxPercent"};a.each(c,function(a,c){b.data(a)&&this.setOption(c,b.data(a))}.bind(this))}}};return d.prototype={init:function(){return this.setOption("isMoving",!1),e().setDataOptions.bind(this)(),e().preLoad(this,this.build.bind(this)),this},build:function(){var b=this.images[0].clone();return this.getElement().addClass(this.getOption("direction")),this._slider=a(this.getOption("template").slider),this.getElement().append(this._slider),this._before=a(this.getOption("template").before),this._before.append(this.images[0]),this.getElement().append(this._before),this._after=a(this.getOption("template").after),this._after.append(this.images[1]),this.getElement().append(this._after),this._hidden=b.addClass("be-af-slider-hidden"),this.getElement().append(this._hidden),this.getOption("initListeners")&&this.initListeners(),this.setPercent(this.getOption("startPercent")),this.getOption("callbacks").afterBuild(),this},initListeners:function(){return e().onWindowResize.bind(this)(),a(c).on("resize",e().onWindowResize.bind(this)),this._slider.on("mousedown touchstart",e().onMoveStart.bind(this)),a(b).on("mousemove touchmove",e().onMoving.bind(this)).on("mouseup touchend",e().onMoveEnd.bind(this)),this},setPercent:function(a){var b,c;return"horizontal"==this.getOption("direction")?(b="width",c="left"):(b="height",c="top"),a<this.getOption("minPercent")&&(a=this.getOption("minPercent")),a>this.getOption("maxPercent")&&(a=this.getOption("maxPercent")),this.percent=a,this.getOption("callbacks").beforePercent(),this._before.css(b,this.percent+"%"),this._slider.css(c,this.percent+"%"),this},getElement:function(){return this._el},getOption:function(a){return this.options[a]},setOption:function(a,b){return this.options[a]=b,this}},a.fn.beAfSlider=function(b){return this.each(function(){a.data(this,"beAfSlider")||a.data(this,"beAfSlider",new d(this,b))})},this}(jQuery,document,window);